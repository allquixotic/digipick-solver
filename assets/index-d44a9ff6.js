(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();function v(i){let o=Array(32).fill(1);for(let e of i)o[e]=0;return o}function k(i,o,e){for(let t of o)if(i[(e+t)%32]===1)return!1;return!0}function y(i,o,e){let t=[...i];for(let n of o)t[(e+n)%32]=1;return t}function R(i,o){let e={direction:null,amount:32};for(let t=0;t<32;t++)if(k(i,o,t)){let n=t,r=32-t,l=n<=r?{direction:"right",amount:n}:{direction:"left",amount:r};l.amount<e.amount&&(e=l)}return e.direction?e:null}function w(i,o,e,t){let n=e==="right"?t:32-t;return y(i,o,n)}function b(i,o){let e=[{rings:i,picks:o,ringIndex:0,solution:[]}];for(;e.length;){const{rings:t,picks:n,ringIndex:r,solution:l}=e.pop();if(t.length===0)return l;let p=t[0];if(p.every(s=>s===1)){e.push({rings:t.slice(1),picks:n,ringIndex:r+1,solution:l});continue}for(let s=0;s<n.length;s++){let d=n[s],c=R(p,d);if(c){let a=w(p,d,c.direction,c.amount),m={ring_index:r,pins:d,direction:c.direction,amount:c.amount},g=[...l,m];a.every(h=>h===1)?e.push({rings:t.slice(1),picks:[...n.slice(0,s),...n.slice(s+1)],ringIndex:r+1,solution:g}):e.push({rings:[a,...t.slice(1)],picks:[...n.slice(0,s),...n.slice(s+1)],ringIndex:r,solution:g})}}}return null}function P(i){let o="",e=-1;if(i==null)return"No solution found.";for(let t of i)t.ring_index!==e&&(e!==-1&&(o+=`
`),e=t.ring_index,o+=`For the ${x(e+1)} ring:
`),o+=`  - Rotate the pick with pins at positions ${t.pins.join(", ")} to the ${t.direction} by ${t.amount} positions.
`;return o}function x(i){let o=i%10,e=i%100;return o===1&&e!==11?i+"st":o===2&&e!==12?i+"nd":o===3&&e!==13?i+"rd":i+"th"}var u=[],f=[];function I(){const i=`
            <div class="pick">
                <hr/>
                <button class="btn btn-danger" onclick="removePick(${u.length})">Remove</button>
                <input type="text" class="form-control pick-positions">
            </div>
            `;$("#picks").append(i)}function O(){const i=`
            <div class="ring">
                <hr/>
                <button class="btn btn-danger" onclick="removeRing(${f.length})">Remove</button>
                <input type="text" class="form-control ring-holes">
            </div>
            `;$("#rings").append(i)}function S(i){$(".pick").eq(i).remove()}function N(i){$(".ring").eq(i).remove()}function L(){u=[],f=[],$(".pick-positions").map(function(){u.push($(this).val().split(",").map(t=>Number(t.trim())))}),$(".ring-holes").map(function(){f.push($(this).val().split(",").map(t=>Number(t.trim())))});let i=f.map(t=>v(t));console.log(`picks=${JSON.stringify(u,null,4)}, rings=${JSON.stringify(f,null,4)}`);const o=b(i,u),e=P(o);$("#output").text(e)}window.addPick=I;window.addRing=O;window.removePick=S;window.removeRing=N;window.solve=L;
